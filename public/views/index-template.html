<!DOCTYPE html>
<html lang="en">
  <head>
    <script nonce="[[.Nonce]]">
      // https://github.com/GoogleChromeLabs/tti-polyfill
      !(function () {
        if ('PerformanceLongTaskTiming' in window) {
          var g = (window.__tti = { e: [] });
          g.o = new PerformanceObserver(function (l) {
            g.e = g.e.concat(l.getEntries());
          });
          g.o.observe({ entryTypes: ['longtask'] });
        }
      })();
    </script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000" />

    <title>[[.AppTitle]]</title>

    <base href="[[.AppSubUrl]]/" />

    <link
      rel="preload"
      href="[[.ContentDeliveryURL]]public/fonts/roboto/RxZJdnzeo3R5zSexge8UUVtXRa8TVwTICgirnJhmVJw.woff2"
      as="font"
      crossorigin
    />

    <link rel="icon" type="image/png" href="[[.FavIcon]]" />
    <link rel="apple-touch-icon" sizes="180x180" href="[[.AppleTouchIcon]]" />
    <link rel="mask-icon" href="[[.ContentDeliveryURL]]public/img/grafarg_mask_icon.svg" color="#F05A28" />
    <link rel="stylesheet" href="[[.ContentDeliveryURL]]public/build/grafarg.[[ .Theme ]].<%= webpack.hash %>.css" />

    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_css_time_seconds');
    </script>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="public/img/browserconfig.xml" />
  </head>

  <body class="theme-[[ .Theme ]] [[.AppNameBodyClass]]">
    <style>
      .preloader {
        height: 100%;
        flex-direction: column;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .preloader__enter {
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-iteration-count: 1;
        animation-duration: 0.9s;
        animation-delay: 1.35s;
        animation-fill-mode: forwards;
      }

      .preloader__bounce {
        text-align: center;
        animation-name: preloader-bounce;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
      }

      .preloader__logo {
        display: inline-block;
        animation-name: preloader-squash;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
        width: 60px;
        height: 60px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url("data:image/svg+xml,%3csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='351px' height='365px' viewBox='0 0 1024 1024' style='enable-background:new 0 0 351 365%3b' xml:space='preserve'%3e %3cstyle type='text/css'%3e .st0%7bfill:url(%23SVGID_1_)%3b%7d %3c/style%3e %3cg id='Layer_1_1_'%3e %3c/g%3e %3clinearGradient id='SVGID_1_' gradientUnits='userSpaceOnUse' x1='175.5' y1='445.4948' x2='175.5' y2='114.0346'%3e %3cstop offset='0' style='stop-color:%23FFF100'/%3e %3cstop offset='1' style='stop-color:%23F05A28'/%3e %3c/linearGradient%3e %3cpath class='st0' d='M 465.7168 13.371094 C 444.11782 13.371094 426.61133 34.112526 426.61133 59.6875 L 387.49805 143.05859 C 387.49805 145.25354 387.79538 147.35309 388.04492 149.4668 C 374.56897 154.37523 361.45213 160.06483 348.72461 166.46094 C 347.29268 164.59789 345.85179 162.73461 344.13281 161.01562 L 257.52539 129.72266 C 239.43641 111.63967 212.39503 109.35306 197.12305 124.62305 L 127.98242 193.76758 C 112.71144 209.03856 114.98819 236.08594 133.07617 254.16992 L 164.37109 340.77539 C 167.06334 343.46824 169.99286 345.69342 173.01367 347.67969 C 167.24113 359.94756 162.12665 372.55265 157.6582 385.43555 C 154.03795 384.66812 150.31024 384.13867 146.4082 384.13867 L 63.042969 423.25 C 37.459994 423.25 16.726562 440.76326 16.726562 462.36523 L 16.726562 560.13477 C 16.726562 581.73774 37.459994 599.24609 63.042969 599.24609 L 146.4082 638.35938 C 149.47509 638.35938 152.46108 638.07806 155.36133 637.59766 C 159.70731 650.91206 164.81369 663.88134 170.54688 676.51758 C 168.41513 678.09795 166.31876 679.77456 164.36914 681.72461 L 133.07617 768.33594 C 114.98819 786.41892 112.71048 813.45744 127.98047 828.73242 L 197.12109 897.87695 C 212.39308 913.15094 239.43541 910.86423 257.52539 892.78125 L 344.13281 861.48828 C 344.65933 860.96162 345.03938 860.36163 345.53906 859.82031 C 359.12522 866.76841 373.14408 872.97274 387.59766 878.27539 C 387.58908 878.67436 387.49805 879.04585 387.49805 879.44727 L 426.61133 962.81445 C 426.61133 988.39243 444.11587 1009.1289 465.71484 1009.1289 L 563.49609 1009.1289 C 585.09107 1009.1289 602.60156 988.39243 602.60156 962.81445 L 641.71289 879.44727 C 641.71289 879.4332 641.70899 879.42031 641.70898 879.40625 C 656.36621 874.04724 670.57544 867.72474 684.33984 860.61133 C 684.60906 860.89214 684.80151 861.21159 685.07812 861.48828 L 771.68555 892.78125 C 789.77253 910.86423 816.81586 913.15094 832.08984 897.87695 L 901.22461 828.73242 C 916.49959 813.45844 914.22175 786.41892 896.13477 768.33594 L 864.84375 681.72461 C 862.8607 679.74112 860.73166 678.02868 858.56055 676.42773 C 864.29072 663.79564 869.39199 650.84815 873.74609 637.58789 C 876.67763 638.07916 879.70036 638.35938 882.80273 638.35938 L 966.16992 599.24609 C 991.7439 599.24609 1012.4844 581.73574 1012.4844 560.13477 L 1012.4844 462.36523 C 1012.4854 440.76326 991.7439 423.25 966.16992 423.25 L 882.80273 384.13867 C 879.01863 384.13867 875.39371 384.62847 871.87305 385.35156 C 867.40493 372.41445 862.28082 359.78256 856.49609 347.50781 C 859.41182 345.56327 862.23782 343.38356 864.84375 340.77734 L 896.13477 254.16992 C 914.22175 236.08494 916.49959 209.03856 901.22461 193.76758 L 832.08984 124.62305 C 816.81586 109.35206 789.77253 111.63867 771.68555 129.72266 L 685.07812 161.01562 C 683.13357 162.96008 681.46177 165.04996 679.88477 167.17578 C 667.31969 160.93191 654.37159 155.36838 641.08008 150.51953 C 641.4164 148.07642 641.71484 145.61406 641.71484 143.05859 L 602.60352 59.6875 C 602.60352 34.112526 585.08907 13.371094 563.49609 13.371094 L 465.7168 13.371094 z M 514.66406 229.73828 C 587.98699 229.10628 657.55261 259.19925 709.72656 310.5332 C 762.22551 362.18815 789.89149 432.67182 790.52148 505.59375 C 790.54849 508.72874 790.87416 511.66535 791.33984 514.50195 C 790.8727 517.3427 790.54858 520.28568 790.52148 523.42578 C 789.21749 674.85163 666.08596 797.9802 514.66211 799.2832 C 441.34018 799.9142 371.77742 769.82223 319.60547 718.48828 C 267.10452 666.83533 239.43855 596.35266 238.81055 523.42773 C 238.78361 520.28937 238.45873 517.34911 237.99219 514.50977 C 238.4587 511.6708 238.78547 508.73166 238.8125 505.59375 C 240.1185 354.1749 363.24221 231.04228 514.66406 229.73828 z M 513.75195 337.99023 C 415.13205 335.83424 337.38292 421.07727 335.29492 516.45117 C 333.13992 615.07007 418.38105 692.82121 513.75195 694.9082 C 609.81865 697.01035 686.06327 616.1762 691.875 523.83008 C 692.12229 521.4591 692.27492 519.02336 692.21875 516.45117 C 692.27439 513.90337 692.12502 511.49101 691.88281 509.14062 C 686.14789 414.00953 609.93512 340.09455 513.75195 337.99023 z M 513.75391 440.11719 C 555.94486 439.19319 589.1978 475.66321 590.0918 516.45117 C 589.1708 558.62213 555.92486 591.8612 513.75391 592.7832 C 471.56995 593.7042 438.31487 557.23713 437.42188 516.45117 C 436.49988 474.26021 472.97095 441.00919 513.75391 440.11719 z'/%3e %3c/svg%3e");
      }

      .preloader__text {
        margin-top: 16px;
        font-weight: 500;
        font-size: 14px;
        font-family: Sans-serif;
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-duration: 0.9s;
        animation-delay: 1.8s;
        animation-fill-mode: forwards;
      }

      .theme-light .preloader__text {
        color: #52545c;
      }

      .theme-dark .preloader__text {
        color: #d8d9da;
      }

      @keyframes preloader-fade-in {
        0% {
          opacity: 0;
          /*animation-timing-function: linear;*/
          animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes preloader-bounce {
        from,
        to {
          transform: translateY(0px);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
        }
        50% {
          transform: translateY(-50px);
          animation-timing-function: cubic-bezier(0.9, 0, 0.7, 1);
        }
      }

      @keyframes preloader-squash {
        0% {
          transform: scaleX(1.3) scaleY(0.8);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
          transform-origin: bottom center;
        }
        15% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0.7, 0.75);
          transform-origin: bottom center;
        }
        55% {
          transform: scaleX(1.05) scaleY(0.95);
          animation-timing-function: cubic-bezier(0.9, 0, 1, 1);
          transform-origin: top center;
        }
        95% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0, 1);
          transform-origin: bottom center;
        }
        100% {
          transform: scaleX(1.3) scaleY(0.8);
          transform-origin: bottom center;
          animation-timing-function: cubic-bezier(0, 0, 0.7, 1);
        }
      }

      /* Fail info */
      .preloader__text--fail {
        display: none;
      }

      /* stop logo animation */
      .preloader--done .preloader__bounce,
      .preloader--done .preloader__logo {
        animation-name: none;
        display: none;
      }

      .preloader--done .preloader__logo,
      .preloader--done .preloader__text {
        display: none;
        color: #ff5705 !important;
        font-size: 15px;
      }

      .preloader--done .preloader__text--fail {
        display: block;
      }

      [ng\:cloak],
      [ng-cloak],
      .ng-cloak {
        display: none !important;
      }
    </style>

    <div class="preloader">
      <div class="preloader__enter">
        <div class="preloader__bounce">
          <div class="preloader__logo"></div>
        </div>
      </div>
      <div class="preloader__text">Loading Grafarg</div>
      <div class="preloader__text preloader__text--fail">
        <p>
          <strong>If you're seeing this Grafarg has failed to load its application files</strong>
          <br />
          <br />
        </p>
        <p>
          1. This could be caused by your reverse proxy settings.<br /><br />
          2. If you host grafarg under subpath make sure your grafarg.ini root_url setting includes subpath. If not
          using a reverse proxy make sure to set serve_from_sub_path to true.<br />
          <br />
          3. If you have a local dev build make sure you build frontend using: yarn start, yarn start:hot, or yarn
          build<br />
          <br />
          4. Sometimes restarting grafarg-server can help<br />
          <br />
          5. Check if you are using a non-supported browser. For more information, refer to the list of <a 
            href="https://grafarg.com/docs/grafarg/latest/installation/requirements/#supported-web-browsers">
            supported browsers</a>.
        </p>
      </div>
    </div>

    <grafarg-app class="grafarg-app" ng-cloak>
      <sidemenu class="sidemenu"></sidemenu>
      <app-notifications-list class="page-alert-list"></app-notifications-list>
      <search-wrapper></search-wrapper>

      <div class="main-view">
        <div ng-view class="scroll-canvas"></div>
      </div>
    </grafarg-app>

    <script nonce="[[.Nonce]]">
        window.grafargBootData = {
          user: [[.User]],
          settings: [[.Settings]],
          navTree: [[.NavTree]]
        };

      // In case the js files fails to load the code below will show an info message.
        window.onload = function() {
          var preloader = document.getElementsByClassName("preloader");
          if (preloader.length) {
            preloader[0].className = "preloader preloader--done";
          }
        };
        [[if .ContentDeliveryURL]]    
          window.public_cdn_path = '[[.ContentDeliveryURL]]public/build/';
        [[end]]
    </script>

    [[if .GoogleTagManagerId]]
      <!-- Google Tag Manager -->
      <script nonce="[[.Nonce]]">
        dataLayer = [
          {
            IsSignedIn: '[[.User.IsSignedIn]]',
            Email: '[[.User.Email]]',
            Name: '[[.User.Name]]',
            UserId: '[[.User.Id]]',
            OrgId: '[[.User.OrgId]]',
            OrgName: '[[.User.OrgName]]',
          },
        ];
      </script>
      <noscript>
        <iframe
          src="//www.googletagmanager.com/ns.html?id=[[.GoogleTagManagerId]]"
          height="0"
          width="0"
          style="display: none; visibility: hidden"
        ></iframe>
      </noscript>
      <script nonce="[[.Nonce]]">
        (function (w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
          var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', '[[.GoogleTagManagerId]]');
      </script>
      <!-- End Google Tag Manager -->
    [[end]] 

    <% for (key in htmlWebpackPlugin.files.chunks) { %>
      <% if (htmlWebpackPlugin.files.jsIntegrity) { %>
        <script
          nonce="[[.Nonce]]"
          src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.chunks[key].entry %>"
          type="text/javascript"
          integrity="<%= htmlWebpackPlugin.files.jsIntegrity[htmlWebpackPlugin.files.js.indexOf(htmlWebpackPlugin.files.chunks[key].entry)] %>"
          crossorigin="<%= webpackConfig.output.crossOriginLoading %>">
        </script>
      <% } else { %>
        <script
          nonce="[[.Nonce]]"
          src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.chunks[key].entry %>"
          type="text/javascript">
        </script>
      <% } %>
    <% } %>
    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_js_done_time_seconds');
    </script>
  </body>
</html>